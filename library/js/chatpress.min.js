jQuery(document).ready(function(){jQuery(".cp_quoted_comment_div").hide(),jQuery("body").on("click",".chatpress_button_input",function(){var e=jQuery(this).data("index"),t=(jQuery(this),tinymce.editors["editor_"+e].getContent()),a=jQuery(".chatpress_author_input"),r=jQuery(".chatpress_style_input");message=t,author=jQuery(a).val(),style=jQuery(r).val();var s={index:e,author:author,message:message,style:style};tinymce.editors["editor_"+e].setContent(""),jQuery(a).val(""),jQuery(r).val(""),jQuery.ajax({type:"POST",url:cp_script.ajaxurl,data:{action:"chatpress_post_message",data:s},success:function(e){var t=jQuery(".chatpress_channel_message_container");jQuery(t).data("index");jQuery(".chatpress_message_div").remove(),t.prepend(e.data.message)}})}),jQuery("body").on("click",".chatpress_button_refresh",function(e){e.preventDefault();var t=jQuery(this).data("index"),a=(jQuery(this),jQuery(".chatpress_content_input")),r=jQuery(".chatpress_author_input"),s=jQuery(".chatpress_style_input"),n=jQuery(a).val(),u={index:t,author:jQuery(r).val(),message:n,style:jQuery(s).val()};jQuery.ajax({type:"POST",url:cp_script.ajaxurl,data:{action:"chatpress_refresh_message",data:u},success:function(e){var t=jQuery(".chatpress_channel_message_container");jQuery(t).data("index");jQuery(".chatpress_message_div").remove(),t.html(e.data.query_results)}})}),jQuery("body").on("click",".message_delete_link",function(e){e.preventDefault();var t=jQuery(this).parent().parent(),a={index:jQuery(this).data("index")};t.remove(),jQuery.ajax({type:"POST",url:cp_script.ajaxurl,data:{action:"chatpress_delete_message",data:a},success:function(e){}})}),jQuery("body").on("click",".message_number_link",function(e){e.preventDefault();var t=jQuery(this).data("message_number"),a=jQuery(this).data("index"),r=tinymce.editors["editor_"+a].getContent();tinymce.editors["editor_"+a].setContent(r+"{{"+t)}),jQuery(".chatpress_channel_message_container_title").hover(function(){jQuery(".chatpress_title_hover_div").show()}),jQuery(".chatpress_channel_message_container_title").mouseout(function(){jQuery(".chatpress_title_hover_div").hide()}),jQuery("body").on("click",".cp_quoted_comment_link",function(e){var t=jQuery(this).data("message_id");e.preventDefault();var a='.cp_quoted_comment_div[data-message_id="'+t+'"]',r=jQuery(this).parent().parent().find(a);"none"===jQuery(r).css("display")?jQuery(r).show():jQuery(r).hide()})});